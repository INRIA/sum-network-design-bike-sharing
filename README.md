# SUM Project Shared Urban Mobility - Network design for Bike Sharing Systems with Bilevel Optimization


## Overview
This repository contains a **Bike-Sharing Optimization Model** designed to optimize fleet rebalancing, station placement, and multimodal transportation integration. The model minimizes operational costs while ensuring efficient bike availability across a network.

Check out our [dynamic results demonstration map](https://inria.github.io/sum-network-design-bike-sharing). 

For more information on the model class, check out the [API documentation](https://inria.github.io/sum-network-design-bike-sharing/network-design-bss-package/docs)


## ‚ú® Features
- **Fleet Rebalancing Optimization**: Efficiently redistributes bikes using a fleet of capacitated trucks.
- **Station Location & Capacity Optimization**: Determines the best locations and sizes for bike stations.
- **Service Region Design**: Defines optimal bike-sharing zones integrated with public transport.
- **Demand-Based Decision Making**: Uses time-dependent origin-destination demand data.
- **Multimodal Transport Integration**: Supports k-order shortest path analysis for better connectivity.

## üèóÔ∏è Installation
Ensure you have Python installed (recommended: Python 3.8+). 
1. Clone the repository
2. Create an environment
3. Install the necessary packages
4. Create experiments and run the models
5. Analyze the results

### 1. Clone the repository
Clone the repository using the following command:
```bash
git clone https://github.com/INRIA/sum-network-design-bike-sharing.git
```

### 2. Create an environment

Check the [Python packaging user guide](https://packaging.python.org/en/latest/tutorials/managing-dependencies/) for more information on how to manage dependencies in Python.

On Debian protected environment, create a virtual enviornment first :
```bash
python3 -m venv env && source env/bin/activate && pip install pipenv && pipenv install --dev
```

Install library pipenv to handle the environment and the dependencies.
```bash
pip install pipenv
```

### 3. Install the necessary packages
Install the necessary packages using the following command:
```bash
pipenv install --dev
```
The library installed : 
- network-design-bss-package/shared_mobility_network_optimizer-0.1.0-cp39-cp39-macosx_10_9_universal2.whl

***Gurobi is a dependency in the library, a valid license is required to run with high volume simulation parameters.***

Check the [Pipenv documentation](https://pipenv.pypa.io/en/latest) for more information on how to use Pipenv.

The project dependencies are listed in the `Pipfile` and `Pipfile.lock` files.

### 4. Run the model 
Check the Jupiter scripts for complete demonstration : 
- simulation_demo.ipynb
- gva_demo.ipynb 


### 5. Run de dynamic Map demo with GeoJson files from experiments
Run localhost with python, this will load the index.html file, which contains HTML and JS code to load JSON files in `map_demo` folder.

You can replace the json files in the `map_demo` folder, with the ones generated by the experiment, in the `data/execution.../map_data` folder

```py
python -m http.server 8080 
```

Then go to page in browser : http://localhost:8080

## üöÄ Usage
To run the optimization model, execute the jupyter notebook 
- `simulation_demo.ipynb`, for a step-by-step simulation demo
- `geneva_demo.ipynb`, for a demo using Geneva bike-sharing data **(coming soon)**

## üìä Input Data
The model requires:
- Geographical distribution of public transport stations
- Origin-destination demand data
- Public transport schedules and connectivity
- Fleet availability (bikes, trucks)

## üèÜ Output Data
| status | Goal |
| ----------- | ----------- |
| simulation only, to run with real data | Optimal station locations and capacities |
| simulation only, to run with real data | Service region definition |
| to develop | Optimized fleet rebalancing plan |
| to develop | Addressing uncertainty in network design |

## üõ† Optimization Goals
- Reduce **operational and capital costs**
- Improve **bike availability** across the network
- Enhance **multimodal transport integration**
- Maximize **demand coverage** while maintaining service quality

